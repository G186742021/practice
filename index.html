<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>スカイマップ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
        <div id="map"></div>
    <script>
  // Initialize and add the map
// Initialize and add the map
let map;
let markers = [];

function initMap() {
    // mapの中心を作成
    const center = { lat: 35.80934774305429, lng: 139.0966983093226 };

    // Google Mapを生成
    const map = new google.maps.Map(document.getElementById('map'), {
        center: center,
        zoom: 17
    });

    // マーカーの座標を設定
    const markerData = [
        { position: { lat: 35.80844286025746, lng: 139.0978784811905 }, page: 'sky/sky1.html' },
        { position: { lat: 35.80891270453501, lng: 139.09631207125673 }, page: 'sky/sky2.html' },
        { position: { lat:35.81011340506005, lng:139.09504606870757  }, page: 'sky/sky3.html' },
        //{ position: { lat: 35.628154392599505, lng: 139.28016654219047 }, page: 'sky/sky4.html' },
        //{ position: { lat: 35.62738632756379, lng: 139.27987852955098 }, page: 'sky/sky5.html' },
        //{ position: { lat: 35.62698124918482, lng: 139.27976526615663 }, page: 'sky/sky6.html' },
       
    ];

    // マーカーを設置
    for (let i = 0; i < markerData.length; i++) {
        const marker = new google.maps.Marker({
            position: markerData[i].position,
            map: map,
            title: 'Point ' + (i + 1)
            optimized:false,
        });

        // マーカーのクリック処理
        marker.addListener('click', function() {
            window.location.href = markerData[i].page;
        });

         markers.push(marker);
    }
        // ストリートビューが表示のON/OFFでマーカーの表示を切り替える
        google.maps.event.addListener(map.getStreetView(), 'visible_changed', function() {
            if (map.getStreetView().getVisible()) {
                VisualMarker(false);
            } else {
                 VisualMarker(true);}
        });
    }
    
    // マーカーの表示/非表示を切り替える関数
    function VisualMarker(visible) {
        for (let i = 0; i < markers.length; i++) {
            markers[i].setVisible(visible);
        }
}

 </script>

 <script async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAQ53db693wsSU1HzyWIZcRsrfrg0Yfs74&callback=initMap">
</script>
</body>
</html>
